{{template "layout.tmpl" .}}

{{define "content"}}
<main>
    <h1>Home</h1>

    {{if .Session.IsLoggedIn}}
    <form action="/posts" method="POST">
        <textarea name="content" aria-label="content" placeholder="Write something..." rows="3"
            required>{{.CreatePostForm.Get "content"}}</textarea>

        {{with .CreatePostErr}}
        <p>Could not create post: <code>{{.Error}}</code></p>
        {{end}}

        <button>Post</button>
    </form>
    {{end}}

    {{range .Posts}}
    {{template "post-article.tmpl" .}}
    {{end}}
</main>
{{end}}
