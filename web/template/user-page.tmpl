{{template "layout.tmpl" .}}

{{define "content"}}
<main>
    <div style="margin: 1rem 0" class="h-stack">
        <picture class="initials bigger" data-initials='{{printf "%.1s" .User.Username }}'></picture>
        <h1 style="margin-top: 0">{{.User.Username}}</h1>
    </div>

    <dl>
        <dt>Following</dt>
        <dd>{{.User.FollowingCount}}</dd>

        <dt>Followers</dt>
        <dd>{{.User.FollowersCount}}</dd>
    </dl>

    {{if and .Session.IsLoggedIn (ne .Session.User.ID .User.ID)}}
    {{template "user-follow-form.tmpl" .}}
    {{end}}

    <hr>

    <h2>{{.User.PostsCount}} Posts</h2>
    {{if eq (len .Posts) 0}}
    <p>No posts.</p>
    {{else}}
    <section style="display: flex; flex-direction: column; gap: 1rem;">
        {{range .Posts}}
        {{template "post.tmpl" (dict "Post" .)}}
        {{end}}
    </section>
    {{end}}
</main>
{{end}}
